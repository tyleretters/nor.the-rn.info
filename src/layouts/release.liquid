---
layout: base.liquid
permalink: /music/{{ release.slug }}
eleventyComputed:
  title: "{{ release.title }} by {{ release.project }}"
---
<div class="my-1 grid grid-cols-1 gap-1 md:grid-cols-2">
  <div>
    <a href="{{ release.cover_url }}">
      <img src="{{ release.cover_url }}" alt="{{ release.title }} Cover" class="h-auto w-full">
    </a>
  </div>
  <div class="px-2 pt-3 ">
    <time
      class="font-mono text-sm text-gray-400"
      datetime="{{ release.released | dateToUTCISO }}"
    >
      {{- release.released | dateToUTCFull -}}
    </time>
    <h1 class="text-4xl font-bold">{{ release.title }}</h1>
    <h2 class="text-lg font-bold mb-4"><a href="/project/{{ release.canonical_project_slug }}/" class="text-yellow-300 underline hover:text-yellow-500 hover:no-underline">{{ release.project }}</a></h2>
    <ul class="mb-4">
      <li class="ellipses">
        <div class="font-semibold">Type</div>
        <div class="ellipses-fill">&#8203;</div>
        <div class="font-mono">{{ release.type }}</div>
      </li>
      <li class="ellipses">
        <div class="font-semibold">Label</div>
        <div class="ellipses-fill">&#8203;</div>
        <div class="font-mono">{{ release.label }}</div>
      </li>
      <li class="ellipses">
        <div class="font-semibold">Format</div>
        <div class="ellipses-fill">&#8203;</div>
        <div class="font-mono">{{ release.format }}</div>
      </li>
    </ul>
    <h3 class="text-lg font-bold">Tracklist</h3>
    <ol class="mb-4">
      {% for track in release.tracks %}
        <li class="ellipses">
          {% assign index = forloop.index %}
          {% if index < 10 %}
            {% assign displayIndex = '0' | append: index %}
          {% else %}
            {% assign displayIndex = index %}
          {% endif %}
          <div class="font-mono text-sm text-gray-400">
            {{ displayIndex }}
          </div>
          <div>{{ track.title }}</div>
          {% if track.mp3_url %}
            <div class="font-mono text-sm text-yellow-300 underline hover:text-yellow-500 hover:no-underline">
              <a href="{{ track.mp3_url }}">MP3</a>
            </div>
          {% endif %}
          {% if track.wav_url %}
            <div class="font-mono text-sm text-yellow-300 underline hover:text-yellow-500 hover:no-underline">
              <a href="{{ track.wav_url }}">WAV</a>
            </div>
          {% endif %}
          <div class="ellipses-fill">&#8203;</div>
          <div class="font-mono text-sm">{{ track.length | formatTrackLength }}</div>
        </li>
        {% if track.mp3_url %}
          <li class="mt-4 mb-8">
            <audio class="w-full" controls src="{{ track.mp3_url }}"></audio>
          </li>
        {% endif %}
      {% endfor %}
    </ol>
    {% if release.streams.size > 0 %}
      <h3 class="text-lg font-bold">Listen</h3>
      <ol class="mb-4">
        {% for stream in release.streams %}
          <li class="flex w-full items-start">
            <a
              href="{{ stream.url }}"
              class="truncate overflow-hidden whitespace-nowrap text-yellow-300 underline hover:text-yellow-500 hover:no-underline"
            >
              {{- stream.platform -}}
            </a>
          </li>
        {% endfor %}
      </ol>
    {% endif %}
    <h3 class="text-lg font-bold">Notes</h3>
    <div class="release mb-4">{{ release.notes }}</div>
    <h3 class="text-lg font-bold">Credits</h3>
    <div class="release mb-4">{{ release.credits }}</div>
  </div>
</div>
